after_success: coveralls
env: [DEPS=false]
install: ['if [[ $TRAVIS_PYTHON_VERSION == ''2.6'' ]]; then travis_retry pip install
    unittest2==1.1.0; fi', 'if [[ $TRAVIS_PYTHON_VERSION == 2* && $DEPS == true ]];
    then travis_retry pip install futures==3.0.3 mock==1.3.0 Monotime==1.0 trollius==2.0;
    fi', 'if [[ $TRAVIS_PYTHON_VERSION == ''2.7'' ]]; then travis_retry pip install
    singledispatch==3.4.0.3; fi', 'if [[ $TRAVIS_PYTHON_VERSION == ''pypy'' && $DEPS
    == true ]]; then travis_retry pip install futures==3.0.3 mock==1.3.0 singledispatch==3.4.0.3;
    fi', 'if [[ $TRAVIS_PYTHON_VERSION != ''pypy''* && $DEPS == true ]]; then travis_retry
    pip install pycurl==7.19.5.1; fi', 'if [[ $TRAVIS_PYTHON_VERSION == ''3.2'' &&
    $DEPS == true ]]; then travis_retry pip install mock==1.3.0 singledispatch==3.4.0.3;
    fi', 'if [[ $TRAVIS_PYTHON_VERSION != ''3.2'' && $TRAVIS_PYTHON_VERSION != ''pypy''*
    && $DEPS == true ]]; then travis_retry travis_retry pip install Twisted==15.2.1;
    fi', 'if [[ $TRAVIS_PYTHON_VERSION == ''2.7'' && $DEPS == true ]]; then travis_retry
    travis_retry pip install sphinx==1.2.2 sphinx_rtd_theme==0.1.8; fi', 'if [[ $TRAVIS_PYTHON_VERSION
    == ''3.4'' && $DEPS == true ]]; then travis_retry travis_retry pip install sphinx==1.2.2
    sphinx_rtd_theme==0.1.8; fi', 'if [[ $TRAVIS_PYTHON_VERSION != ''pypy''* ]]; then
    export TORNADO_EXTENSION=1; fi', travis_retry python setup.py install, travis_retry
    pip install coveralls==1.0a2]
language: python
os: linux
python: 3.4
script: [cd maint, cp ../.coveragerc ., 'if [[ $TRAVIS_PYTHON_VERSION != ''pypy''*
    ]]; then export TORNADO_EXTENSION=1; fi', export TARGET="-m tornado.test.runtests",
  export ASYNC_TEST_TIMEOUT=15, 'if [[ $TRAVIS_PYTHON_VERSION != 2.6 ]]; then export
    TARGET="-m coverage run $TARGET"; fi', python $TARGET, python $TARGET --ioloop=tornado.platform.select.SelectIOLoop,
  python -O $TARGET, LANG=C python $TARGET, LANG=en_US.utf-8 python $TARGET, 'if [[
    $TRAVIS_PYTHON_VERSION == 3* ]]; then python -bb $TARGET; fi', 'if [[ $TRAVIS_PYTHON_VERSION
    != pypy* && $DEPS == true ]]; then python $TARGET --resolver=tornado.netutil.ThreadedResolver;
    fi', 'if [[ $TRAVIS_PYTHON_VERSION == 2* && $DEPS == true ]]; then python $TARGET
    --httpclient=tornado.curl_httpclient.CurlAsyncHTTPClient; fi', 'if [[ $TRAVIS_PYTHON_VERSION
    == 2* && $DEPS == true ]]; then python $TARGET --ioloop_time_monotonic; fi', 'if
    [[ $TRAVIS_PYTHON_VERSION != ''3.2'' && $TRAVIS_PYTHON_VERSION != ''pypy''* &&
    $DEPS == true ]]; then python $TARGET --ioloop=tornado.platform.twisted.TwistedIOLoop;
    fi', 'if [[ $TRAVIS_PYTHON_VERSION == 3.4 ]]; then python $TARGET --ioloop=tornado.platform.asyncio.AsyncIOLoop;
    fi', 'if [[ $TRAVIS_PYTHON_VERSION == 2* && $DEPS == true ]]; then python $TARGET
    --ioloop=tornado.platform.asyncio.AsyncIOLoop; fi', 'if [[ $TRAVIS_PYTHON_VERSION
    == 2* && $DEPS == true ]]; then python $TARGET --resolver=tornado.platform.twisted.TwistedResolver;
    fi', 'if [[ $TRAVIS_PYTHON_VERSION == ''3.3'' ]]; then python $TARGET --ioloop_time_monotonic;
    fi', 'if [[ $TRAVIS_PYTHON_VERSION == ''3.4'' ]]; then python $TARGET --ioloop_time_monotonic;
    fi', export TORNADO_EXTENSION=0, 'if [[ $TRAVIS_PYTHON_VERSION == ''3.4'' && $DEPS
    == true ]]; then cd ../docs && mkdir sphinx-out && sphinx-build -E -n -W -b html
    . sphinx-out; fi', 'if [[ $TRAVIS_PYTHON_VERSION == ''2.7'' && $DEPS == true ]];
    then cd ../docs && mkdir sphinx-doctest-out && sphinx-build -E -n -b doctest .
    sphinx-out; fi', 'if [[ $TRAVIS_PYTHON_VERSION == ''3.4'' && $DEPS == true ]];
    then cd ../docs && mkdir sphinx-doctest-out && sphinx-build -E -n -b doctest .
    sphinx-out; fi']
sudo: false
