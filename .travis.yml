addons:
  apt:
    packages: [ghostscript, graphviz, imagemagick, lmodern, pgf, texlive, texlive-extra-utils,
      texlive-fonts-recommended, texlive-latex-extra, texlive-latex-recommended, texlive-pictures,
      texlive-xetex]
after_success: [pip install coveralls==1.3.0, coveralls]
before_install: ['wget -q ${LILYPOND_URL}lilypond-${LILYPOND_VERSION}-1.linux-64.sh',
  'sh lilypond-${LILYPOND_VERSION}-1.linux-64.sh --batch', pip install -U pip==10.0.1
    coverage==4.5.1, pip install --target /tmp/typehints --no-deps uqbar>=0.2.11,
  export MYPYPATH=/tmp/typehints, 'export PATH=/home/travis/bin:$PATH']
dist: trusty
env: ACCELERATED=true
global_env: LILYPOND_URL="http://lilypond.org/downloads/binaries/linux-64/" LILYPOND_VERSION=2.19.65
group: stable
install: [pip install -e ., 'if [[ $TRAVIS_READ_ONLY == ''true'' ]]; then mkdir ~/.abjad;
    chmod 000 ~/.abjad; fi', python -c "import abjad; print(abjad.abjad_configuration.configuration_file_path)",
  rm -Rif ~/.abjad, abjad/scr/devel/prime-parser-tables, 'pip install -e .[test]',
  'if [[ $ACCELERATED == true ]]; then pip install -e .[accelerated]; fi']
language: python
os: linux
python: '3.6'
script: [coverage run -a `which pytest`, mypy --version, mypy abjad]
sudo: false
